mixin fieldLabel(label)
    .field
        label.label.subtitle.is-4.is-marginless(style=`${label ? "" : "color: rgba(0,0,0,0)"}`)= label || "_"
            .control
                block

mixin fieldGroup()
    .field
        .field-body
            block
        br

mixin input(label, type, name, placeholder, value, required)
    +fieldLabel(label)
        input.input(type=type, name=name placeholder=placeholder value=value required=required)


mixin textArea(label, name, placeholder, value, required)
    +fieldLabel(label)
        textarea.textarea(name=name placeholder=placeholder rows=3)=value


mixin searchSelect(label, name, options, value, required)

    .column.is-4.is-paddingless
        +input(label, text, `${name}Search`, `Filter ${name}s`)

    .column.is-paddingless
        +fieldLabel()
            .select.is-fullwidth
                select(name=name data-filterInput=`${name}Search` required=required).searchable
                    option(value="")=`Select ${label}`
                    each option in options
                        option(value=option.value)=option.text

mixin fileAttachments(label, name, files)
    table.table.is-striped.is-fullwidth.fileAttachTable(data-files=files data-name=name)
        thead
            tr
                th(colspan=2)= label
        tbody
            //- each file in files
            //-     tr
            //-         td 
            //-             a(href=`/files/uploads/${file.name}` target="_bank")
            //-                 p=`${file.name.slice(0,25)}${file.name.length > 25 ? "..." : ""}`

            //-         td
            //-             p.has-text-right
            //-                 a.button.is-danger.attachmentDeleteBtn Delete
        tfoot
            tr
                td
                    .file.has-name.is-fullwidth
                        label.file-label
                            input.file-input.attachmentAddInput(type="file" name=`${name}UploadField`)
                            .file-cta
                                .file-icon
                                    i.fas.fa-upload
                                .file-label Choose a file
                            .file-name

                        
                                
                    td
                        p.has-text-right
                            a.button.is-success.attachmentAddBtn Add

//- TODO: Dynamic number of layers using JS
mixin soilLayerTable(layers)
    - layers = layers || [{}]
    +fieldLabel("Soil Layers")
    table.table.is-fullwidth
        thead
            tr
                th Depth
                th Soil Description
                th Groundwater / Bedrock Observations
        tbody
            each i in [0, 1, 2, 3, 4]
                - layers[i] = layers[i] || {}
                tr 
                    td
                        input.input(type="text", name=`soilLayers[${i}].depth` placeholder="0.0 - 0.0" value=layers[i].depth)
                    td
                        input.input(type="text", name=`soilLayers[${i}].description` placeholder="Soil Description" value=layers[i].description)
                    td
                        input.input(type="text", name=`soilLayers[${i}].observations` placeholder="Groundwater / Bedrock Observations" value=layers[i].observations)

        
